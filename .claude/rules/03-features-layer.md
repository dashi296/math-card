# Featuresレイヤー

ビジネス機能別に整理されたドメイン固有の機能。

## `features/math-practice/`

ランダムな数学問題の生成と練習モード。

### コンポーネント

- **ui/math-flashcard.tsx** - メインの数学フラッシュカードコンポーネント
  - ランダムな加算問題(1-20の範囲)を表示
  - 音声入力で回答を受け付け
  - 即座のフィードバック(正解/不正解)を提供
  - 統計を追跡し自動で次の問題に進む

### ビジネスロジック

- **model/use-math-flashcard.ts** - ビジネスロジックhook
  - ランダムな問題を生成(加算、減算、乗算、除算)
  - ユーザーの回答と正誤状態を管理
  - 統計(正解、不正解、合計、正答率)を追跡
  - セッション追跡のためのデータベース統合

## `features/card-sets/`

事前定義されたカードセットの管理と練習モード。

### コンポーネント

- **ui/card-set-flashcard.tsx** - カードセット練習コンポーネント
  - 選択されたカードセットから問題を表示
  - 回答のための音声認識
  - カードセット内の進捗追跡
  - 統計を含む完了画面

- **ui/card-set-selector.tsx** - カードセット選択インターフェース
  - 学年別に利用可能なカードセットをリスト表示
  - カードセットの詳細(演算子、範囲、枚数)を表示
  - データベースからデフォルトのカードセットを初期化

### ビジネスロジック

- **model/use-card-set-flashcard.ts** - カードセット練習ロジック
  - カードセットの読み込みとシャッフル
  - カードセット内の進捗追跡
  - 進捗永続化のためのデータベース統合

## `features/voice-recognition/`

日本語音声入力と数字認識。

### コンポーネント

- **ui/voice-number-recognition.tsx** - スタンドアロン音声UIコンポーネント
  - 音声認識インターフェースと結果表示
  - 継続認識モードをサポート
  - リアルタイムフィードバックのための暫定結果を表示

### ビジネスロジック

- **model/use-voice-number-recognition.ts** - 音声認識hook
  - expo-speech-recognitionを使用した日本語音声入力処理
  - ベストマッチ選択アルゴリズムの実装
  - 継続認識のための自動再開モード
  - 設定: ja-JP、maxAlternatives: 10、continuous mode

### ライブラリ

- **lib/japanese-number/** - 日本語数字解析ユーティリティ
  - `index.ts` - メインのエクスポートとスコアリング関数
  - `parser.ts` - 日本語テキストからの数字抽出
  - `constants.ts` - 日本語数字のマッピングとスコアリングウェイト
  - `helpers.ts` - 文字列類似度計算
  - `fuzzy-matching.ts` - 音韻的類似度マッチング
  - `types.ts` - TypeScript型定義
